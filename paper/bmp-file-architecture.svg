<svg viewBox="0 0 800 700" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="800" height="700" fill="white"/>
  
  <!-- Title -->
  <text x="400" y="40" font-family="Times, serif" font-size="20" font-weight="bold" text-anchor="middle" fill="black">BMP File Format Structure</text>
  
  <!-- File representation border -->
  <rect x="200" y="80" width="400" height="520" fill="none" stroke="black" stroke-width="2"/>
  <text x="120" y="340" font-family="Times, serif" font-size="14" font-weight="bold" text-anchor="middle" fill="black" transform="rotate(-90, 120, 340)">BMP FILE</text>
  
  <!-- BMP Header -->
  <rect x="220" y="100" width="360" height="70" fill="white" stroke="black" stroke-width="1.5"/>
  <text x="400" y="125" font-family="Times, serif" font-size="16" font-weight="bold" text-anchor="middle" fill="black">BMP File Header</text>
  <text x="400" y="145" font-family="Times, serif" font-size="12" text-anchor="middle" fill="black">14 bytes</text>
  <text x="400" y="160" font-family="Times, serif" font-size="11" text-anchor="middle" fill="black">File signature ("BM"), file size, data offset</text>
  
  <!-- DIB Header -->
  <rect x="220" y="180" width="360" height="70" fill="white" stroke="black" stroke-width="1.5"/>
  <text x="400" y="205" font-family="Times, serif" font-size="16" font-weight="bold" text-anchor="middle" fill="black">DIB Header</text>
  <text x="400" y="225" font-family="Times, serif" font-size="12" text-anchor="middle" fill="black">40 bytes (BITMAPINFOHEADER)</text>
  <text x="400" y="240" font-family="Times, serif" font-size="11" text-anchor="middle" fill="black">Image width, height, bit depth, compression</text>
  
  <!-- Header total annotation -->
  <line x1="150" y1="260" x2="200" y2="260" stroke="black" stroke-width="1"/>
  <text x="140" y="265" font-family="Times, serif" font-size="12" font-weight="bold" text-anchor="end" fill="black">Total Header: 54 bytes</text>
  
  <!-- Color Palette (Optional) -->
  <rect x="220" y="270" width="360" height="50" fill="white" stroke="black" stroke-width="1" stroke-dasharray="4,4"/>
  <text x="400" y="290" font-family="Times, serif" font-size="14" font-weight="bold" text-anchor="middle" fill="black">Color Palette (Optional)</text>
  <text x="400" y="310" font-family="Times, serif" font-size="11" text-anchor="middle" fill="black">Present for images ≤ 8 bits per pixel</text>
  
  <!-- Pixel Array -->
  <rect x="220" y="340" width="280" height="120" fill="white" stroke="black" stroke-width="1.5"/>
  <text x="360" y="370" font-family="Times, serif" font-size="16" font-weight="bold" text-anchor="middle" fill="black">Pixel Array</text>
  <text x="360" y="390" font-family="Times, serif" font-size="12" text-anchor="middle" fill="black">Bitmap image data</text>
  
  <!-- Pixel grid representation -->
  <g stroke="black" stroke-width="0.5" fill="none">
    <rect x="240" y="400" width="20" height="15"/>
    <rect x="260" y="400" width="20" height="15"/>
    <rect x="280" y="400" width="20" height="15"/>
    <rect x="300" y="400" width="20" height="15"/>
    <text x="350" y="410" font-family="Times, serif" font-size="9" fill="black">...</text>
    <rect x="240" y="420" width="20" height="15"/>
    <rect x="260" y="420" width="20" height="15"/>
    <rect x="280" y="420" width="20" height="15"/>
    <rect x="300" y="420" width="20" height="15"/>
    <text x="350" y="430" font-family="Times, serif" font-size="9" fill="black">...</text>
    <text x="250" y="450" font-family="Times, serif" font-size="9" fill="black">Row n</text>
    <text x="250" y="435" font-family="Times, serif" font-size="9" fill="black">Row n+1</text>
  </g>
  
  <!-- Padding -->
  <rect x="500" y="340" width="80" height="120" fill="white" stroke="black" stroke-width="1.5"/>
  <text x="540" y="370" font-family="Times, serif" font-size="14" font-weight="bold" text-anchor="middle" fill="black">Padding</text>
  <text x="540" y="390" font-family="Times, serif" font-size="11" text-anchor="middle" fill="black">Bytes to align</text>
  <text x="540" y="405" font-family="Times, serif" font-size="11" text-anchor="middle" fill="black">rows to 4-byte</text>
  <text x="540" y="420" font-family="Times, serif" font-size="11" text-anchor="middle" fill="black">boundaries</text>
  
  <!-- Padding pattern -->
  <g fill="black">
    <rect x="520" y="435" width="3" height="3"/>
    <rect x="527" y="435" width="3" height="3"/>
    <rect x="534" y="435" width="3" height="3"/>
    <rect x="541" y="435" width="3" height="3"/>
    <rect x="548" y="435" width="3" height="3"/>
    <rect x="555" y="435" width="3" height="3"/>
  </g>
  
  <!-- Data flow arrows -->
  <defs>
    <marker id="arrowhead" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="black"/>
    </marker>
  </defs>
  
  <!-- Storage order annotation -->
  <text x="650" y="120" font-family="Times, serif" font-size="12" font-weight="bold" fill="black">Structure Details:</text>
  
  <text x="650" y="140" font-family="Times, serif" font-size="10" fill="black">• Magic number: 0x42 0x4D</text>
  <text x="650" y="155" font-family="Times, serif" font-size="10" fill="black">• File size in bytes</text>
  <text x="650" y="170" font-family="Times, serif" font-size="10" fill="black">• Pixel data offset</text>
  
  <text x="650" y="200" font-family="Times, serif" font-size="10" fill="black">• Header size: 40 bytes</text>
  <text x="650" y="215" font-family="Times, serif" font-size="10" fill="black">• Image dimensions</text>
  <text x="650" y="230" font-family="Times, serif" font-size="10" fill="black">• Bits per pixel</text>
  <text x="650" y="245" font-family="Times, serif" font-size="10" fill="black">• Compression method</text>
  
  <text x="650" y="280" font-family="Times, serif" font-size="10" fill="black">• RGB color table</text>
  <text x="650" y="295" font-family="Times, serif" font-size="10" fill="black">• Index-based colors</text>
  
  <text x="650" y="360" font-family="Times, serif" font-size="10" fill="black">• BGR byte order</text>
  <text x="650" y="375" font-family="Times, serif" font-size="10" fill="black">• Bottom-up row order</text>
  <text x="650" y="390" font-family="Times, serif" font-size="10" fill="black">• Left-to-right pixels</text>
  <text x="650" y="405" font-family="Times, serif" font-size="10" fill="black">• Variable size data</text>
  
  <text x="650" y="440" font-family="Times, serif" font-size="10" fill="black">• Row width multiple of 4</text>
  <text x="650" y="455" font-family="Times, serif" font-size="10" fill="black">• Zero-byte padding</text>
  
  <!-- Memory layout -->
  <text x="400" y="520" font-family="Times, serif" font-size="12" font-weight="bold" text-anchor="middle" fill="black">Memory Layout (Sequential)</text>
  
  <!-- Bottom reference -->
  <text x="50" y="650" font-family="Times, serif" font-size="11" fill="black">Figure: Bitmap (BMP) file format structure showing header components, optional color palette, pixel data array, and row padding for 4-byte alignment.</text>
  
  <!-- Byte offset indicators -->
  <text x="160" y="135" font-family="Times, serif" font-size="10" fill="black">0x00</text>
  <text x="160" y="215" font-family="Times, serif" font-size="10" fill="black">0x0E</text>
  <text x="160" y="295" font-family="Times, serif" font-size="10" fill="black">0x36</text>
  <text x="160" y="400" font-family="Times, serif" font-size="10" fill="black">0x36+n</text>
  
  <!-- Connecting lines for byte offsets -->
  <line x1="175" y1="135" x2="220" y2="135" stroke="black" stroke-width="0.5" stroke-dasharray="2,2"/>
  <line x1="175" y1="215" x2="220" y2="215" stroke="black" stroke-width="0.5" stroke-dasharray="2,2"/>
  <line x1="175" y1="295" x2="220" y2="295" stroke="black" stroke-width="0.5" stroke-dasharray="2,2"/>
  <line x1="175" y1="400" x2="220" y2="400" stroke="black" stroke-width="0.5" stroke-dasharray="2,2"/>
</svg>